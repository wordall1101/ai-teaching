import { config } from "dotenv";
import { drizzle } from "drizzle-orm/postgres-js";
import postgres from "postgres";
import { category, article, course, tocItem, note } from './schema';

config({
  path: ".env.local",
});

export async function seedDatabase() {
  if (!process.env.POSTGRES_URL) {
    throw new Error("POSTGRES_URL is not defined");
  }

  const connection = postgres(process.env.POSTGRES_URL, { max: 1 });
  const db = drizzle(connection);

  console.log('ðŸŒ± Starting database seeding...');

  try {
    // æ¸…ç©ºçŽ°æœ‰æ•°æ®ï¼ˆè°¨æ…Žä½¿ç”¨ï¼Œä»…åœ¨å¼€å‘çŽ¯å¢ƒä½¿ç”¨ï¼‰
    await db.delete(tocItem);
    await db.delete(note);
    await db.delete(article);
    await db.delete(course);
    await db.delete(category);

    console.log('âœ… Cleared existing data');

    // 1. æ’å…¥åˆ†ç±»æ•°æ®
    console.log('ðŸ“š Inserting categories...');
    
    const categories = await db.insert(category).values([
      // é¡¶çº§åˆ†ç±» - æ­£å¿ƒ (level 0)
      {
        id: '00000000-0000-0000-0000-000000000001',
        title: 'æ­£å¿ƒ',
        description: 'æ­£å¿ƒè¯šæ„ï¼Œä¿®èº«é½å®¶æ²»å›½å¹³å¤©ä¸‹',
        level: 0,
        order: 0,
        path: '1'
      },
      // é¡¶çº§åˆ†ç±» - è¯šæ„ (level 0)
      {
        id: '00000000-0000-0000-0000-000000000002',
        title: 'è¯šæ„',
        description: 'è¯šè€…ï¼Œå¤©ä¹‹é“ä¹Ÿï¼›æ€è¯šè€…ï¼Œäººä¹‹é“ä¹Ÿ',
        level: 0,
        order: 1,
        path: '2'
      },
      // é¡¶çº§åˆ†ç±» - æ ¼ç‰© (level 0)
      {
        id: '00000000-0000-0000-0000-000000000003',
        title: 'æ ¼ç‰©',
        description: 'æ ¼ç‰©è‡´çŸ¥ï¼Œè¯šæ„æ­£å¿ƒ',
        level: 0,
        order: 2,
        path: '3'
      },

      // äºŒçº§åˆ†ç±» - ã€Šå¤§å­¦ã€‹ (level 1)
      {
        id: '00000000-0000-0000-0000-000000000011',
        parentId: '00000000-0000-0000-0000-000000000001',
        title: 'ã€Šå¤§å­¦ã€‹',
        description: 'å¤§å­¦ä¹‹é“ï¼Œåœ¨æ˜Žæ˜Žå¾·ï¼Œåœ¨äº²æ°‘ï¼Œåœ¨æ­¢äºŽè‡³å–„',
        level: 1,
        order: 0,
        path: '1/11'
      },
      // äºŒçº§åˆ†ç±» - ã€Šä¸­åº¸ã€‹ (level 1)
      {
        id: '00000000-0000-0000-0000-000000000012',
        parentId: '00000000-0000-0000-0000-000000000001',
        title: 'ã€Šä¸­åº¸ã€‹',
        description: 'ä¸­åº¸ä¹‹é“ï¼Œä¸åä¸å€šï¼Œæ— è¿‡æ— ä¸åŠ',
        level: 1,
        order: 1,
        path: '1/12'
      },
      // äºŒçº§åˆ†ç±» - ã€Šè®ºè¯­ã€‹ (level 1)
      {
        id: '00000000-0000-0000-0000-000000000021',
        parentId: '00000000-0000-0000-0000-000000000002',
        title: 'ã€Šè®ºè¯­ã€‹',
        description: 'å­¦è€Œæ—¶ä¹ ä¹‹ï¼Œä¸äº¦è¯´ä¹Ž',
        level: 1,
        order: 0,
        path: '2/21'
      },
      // äºŒçº§åˆ†ç±» - ã€Šå­Ÿå­ã€‹ (level 1)
      {
        id: '00000000-0000-0000-0000-000000000031',
        parentId: '00000000-0000-0000-0000-000000000003',
        title: 'ã€Šå­Ÿå­ã€‹',
        description: 'æ€§å–„è®ºï¼Œå…»æµ©ç„¶ä¹‹æ°”',
        level: 1,
        order: 0,
        path: '3/31'
      },

      // ä¸‰çº§åˆ†ç±» - ã€Šå¤§å­¦ã€‹å…·ä½“ç« èŠ‚ (level 2)
      {
        id: '00000000-0000-0000-0000-000000000111',
        parentId: '00000000-0000-0000-0000-000000000011',
        title: 'å¤§å­¦ä¹‹é“',
        description: 'ä¸‰çº²é¢†å…«æ¡ç›®çš„æ ¹æœ¬å®—æ—¨',
        level: 2,
        order: 0,
        path: '1/11/111'
      },
      {
        id: '00000000-0000-0000-0000-000000000112',
        parentId: '00000000-0000-0000-0000-000000000011',
        title: 'æ˜Žæ˜Žå¾·',
        description: 'å½°æ˜¾å…‰æ˜Žçš„å“å¾·',
        level: 2,
        order: 1,
        path: '1/11/112'
      },
      {
        id: '00000000-0000-0000-0000-000000000113',
        parentId: '00000000-0000-0000-0000-000000000011',
        title: 'äº²æ°‘',
        description: 'äº²çˆ±äººæ°‘ï¼Œæ•™åŒ–ç™¾å§“',
        level: 2,
        order: 2,
        path: '1/11/113'
      }
    ]).returning();

    console.log(`âœ… Inserted ${categories.length} categories`);

    // 2. æ’å…¥æ–‡ç« æ•°æ®
    console.log('ðŸ“– Inserting articles...');

    const articles = await db.insert(article).values([
      {
        id: '00000000-0000-0000-0000-000000001001',
        categoryId: '00000000-0000-0000-0000-000000000111',
        title: 'å¤§å­¦ä¹‹é“',
        slug: 'university-way',
        coverImage: '/images/university-way.jpg',
        excerpt: 'æŽ¢ç´¢å¤§å­¦ä¹‹é“çš„æ·±åˆ»å†…æ¶µï¼Œç†è§£ä¸‰çº²é¢†å…«æ¡ç›®çš„å“²å­¦æ€æƒ³',
        original: `å¤§å­¦ä¹‹é“ï¼Œåœ¨æ˜Žæ˜Žå¾·ï¼Œåœ¨äº²æ°‘ï¼Œåœ¨æ­¢äºŽè‡³å–„ã€‚
çŸ¥æ­¢è€ŒåŽæœ‰å®šï¼Œå®šè€ŒåŽèƒ½é™ï¼Œé™è€ŒåŽèƒ½å®‰ï¼Œå®‰è€ŒåŽèƒ½è™‘ï¼Œè™‘è€ŒåŽèƒ½å¾—ã€‚
ç‰©æœ‰æœ¬æœ«ï¼Œäº‹æœ‰ç»ˆå§‹ï¼ŒçŸ¥æ‰€å…ˆåŽï¼Œåˆ™è¿‘é“çŸ£ã€‚`,
        historical: `ã€Šå¤§å­¦ã€‹åŽŸæ˜¯ã€Šç¤¼è®°ã€‹ä¸­çš„ä¸€ç¯‡ï¼Œç›¸ä¼ ä¸ºå­”å­å¼Ÿå­æ›¾å‚ï¼ˆæ›¾å­ï¼‰æ‰€ä½œã€‚å®‹ä»£æœ±ç†¹å°†å…¶ä¸Žã€Šä¸­åº¸ã€‹ã€ã€Šè®ºè¯­ã€‹ã€ã€Šå­Ÿå­ã€‹åˆç¼–ä¸º"å››ä¹¦"ã€‚
æœ¬ç« æ˜¯ã€Šå¤§å­¦ã€‹çš„å¼€ç¯‡ï¼Œæå‡ºäº†å„’å®¶æ€æƒ³çš„"ä¸‰çº²é¢†"ï¼šæ˜Žæ˜Žå¾·ã€äº²æ°‘ã€æ­¢äºŽè‡³å–„ï¼Œä¸ºåŽç»­çš„"å…«æ¡ç›®"å¥ å®šäº†ç†è®ºåŸºç¡€ã€‚`,
        translation: `å¤§å­¦çš„å®—æ—¨åœ¨äºŽå¼˜æ‰¬å…‰æ˜Žæ­£å¤§çš„å“å¾·ï¼Œåœ¨äºŽä½¿äººå¼ƒæ—§å›¾æ–°ï¼Œåœ¨äºŽä½¿äººè¾¾åˆ°æœ€å®Œå–„çš„å¢ƒç•Œã€‚
çŸ¥é“åº”è¾¾åˆ°çš„å¢ƒç•Œæ‰èƒ½å¤Ÿå¿—å‘åšå®šï¼›å¿—å‘åšå®šæ‰èƒ½å¤Ÿé•‡é™ä¸èºï¼›é•‡é™ä¸èºæ‰èƒ½å¤Ÿå¿ƒå®‰ç†å¾—ï¼›å¿ƒå®‰ç†å¾—æ‰èƒ½å¤Ÿæ€è™‘å‘¨è¯¦ï¼›æ€è™‘å‘¨è¯¦æ‰èƒ½å¤Ÿæœ‰æ‰€æ”¶èŽ·ã€‚
æ¯æ ·ä¸œè¥¿éƒ½æœ‰æ ¹æœ¬æœ‰æžæœ«ï¼Œæ¯ä»¶äº‹æƒ…éƒ½æœ‰å¼€å§‹æœ‰ç»ˆç»“ã€‚æ˜Žç™½äº†è¿™æœ¬æœ«å§‹ç»ˆçš„é“ç†ï¼Œå°±æŽ¥è¿‘äº‹ç‰©å‘å±•çš„è§„å¾‹äº†ã€‚`,
        order: 0
      },
      {
        id: '00000000-0000-0000-0000-000000001002',
        categoryId: '00000000-0000-0000-0000-000000000112',
        title: 'æ˜Žæ˜Žå¾·',
        slug: 'illustrious-virtue',
        coverImage: '/images/illustrious-virtue.jpg',
        excerpt: 'æ·±å…¥ç†è§£æ˜Žå¾·çš„æœ¬è´¨ï¼ŒæŽ¢ç´¢å¦‚ä½•åœ¨ç”Ÿæ´»ä¸­å½°æ˜¾å…‰æ˜Žå“å¾·',
        original: `å¤ä¹‹æ¬²æ˜Žæ˜Žå¾·äºŽå¤©ä¸‹è€…ï¼Œå…ˆæ²»å…¶å›½ï¼›æ¬²æ²»å…¶å›½è€…ï¼Œå…ˆé½å…¶å®¶ï¼›æ¬²é½å…¶å®¶è€…ï¼Œå…ˆä¿®å…¶èº«ï¼›æ¬²ä¿®å…¶èº«è€…ï¼Œå…ˆæ­£å…¶å¿ƒï¼›æ¬²æ­£å…¶å¿ƒè€…ï¼Œå…ˆè¯šå…¶æ„ï¼›æ¬²è¯šå…¶æ„è€…ï¼Œå…ˆè‡´å…¶çŸ¥ï¼›è‡´çŸ¥åœ¨æ ¼ç‰©ã€‚`,
        historical: `"æ˜Žæ˜Žå¾·"æ˜¯ã€Šå¤§å­¦ã€‹çš„æ ¸å¿ƒæ¦‚å¿µä¹‹ä¸€ï¼Œä½“çŽ°äº†å„’å®¶å¯¹äººæ€§æœ¬å–„çš„ä¿¡å¿µã€‚ç¬¬ä¸€ä¸ª"æ˜Ž"æ˜¯åŠ¨è¯ï¼Œæ„ä¸º"å½°æ˜¾"ï¼›ç¬¬äºŒä¸ª"æ˜Ž"æ˜¯å½¢å®¹è¯ï¼Œæ„ä¸º"å…‰æ˜Žçš„"ï¼›"å¾·"æŒ‡å“å¾·ã€‚
è¿™ä¸€æ€æƒ³å½±å“äº†åŽä¸–å„’å®¶å­¦è€…å¯¹äººæ€§è®ºå’Œä¿®å…»è®ºçš„æŽ¢è®¨ã€‚`,
        translation: `å¤ä»£é‚£äº›è¦æƒ³åœ¨å¤©ä¸‹å¼˜æ‰¬å…‰æ˜Žæ­£å¤§å“å¾·çš„äººï¼Œå…ˆè¦æ²»ç†å¥½è‡ªå·±çš„å›½å®¶ï¼›è¦æƒ³æ²»ç†å¥½è‡ªå·±çš„å›½å®¶ï¼Œå…ˆè¦ç®¡ç†å¥½è‡ªå·±çš„å®¶åº­å’Œå®¶æ—ï¼›è¦æƒ³ç®¡ç†å¥½è‡ªå·±çš„å®¶åº­å’Œå®¶æ—ï¼Œå…ˆè¦ä¿®å…»è‡ªèº«çš„å“æ€§ï¼›è¦æƒ³ä¿®å…»è‡ªèº«çš„å“æ€§ï¼Œå…ˆè¦ç«¯æ­£è‡ªå·±çš„å¿ƒæ€ï¼›è¦æƒ³ç«¯æ­£è‡ªå·±çš„å¿ƒæ€ï¼Œå…ˆè¦ä½¿è‡ªå·±çš„æ„å¿µçœŸè¯šï¼›è¦æƒ³ä½¿è‡ªå·±çš„æ„å¿µçœŸè¯šï¼Œå…ˆè¦ä½¿è‡ªå·±èŽ·å¾—çŸ¥è¯†ï¼›èŽ·å¾—çŸ¥è¯†çš„é€”å¾„åœ¨äºŽè®¤è¯†ã€ç ”ç©¶ä¸‡äº‹ä¸‡ç‰©ã€‚`,
        order: 0
      },
      {
        id: '00000000-0000-0000-0000-000000001003',
        categoryId: '00000000-0000-0000-0000-000000000021',
        title: 'å­¦è€Œæ—¶ä¹ ä¹‹',
        slug: 'learning-and-practice',
        coverImage: '/images/learning-practice.jpg',
        excerpt: 'å­¦ä¹ ä¸Žå®žè·µç›¸ç»“åˆï¼Œä½“ä¼šçŸ¥è¯†çš„çœŸæ­£ä»·å€¼',
        original: `å­æ›°ï¼š"å­¦è€Œæ—¶ä¹ ä¹‹ï¼Œä¸äº¦è¯´ä¹Žï¼Ÿæœ‰æœ‹è‡ªè¿œæ–¹æ¥ï¼Œä¸äº¦ä¹ä¹Žï¼Ÿäººä¸çŸ¥è€Œä¸æ„ ï¼Œä¸äº¦å›å­ä¹Žï¼Ÿ"`,
        historical: `è¿™æ˜¯ã€Šè®ºè¯­ã€‹çš„å¼€ç¯‡ç¬¬ä¸€ç« ï¼Œä½“çŽ°äº†å­”å­æ•™è‚²æ€æƒ³çš„æ ¸å¿ƒã€‚å­”å­å¼ºè°ƒå­¦ä¹ ä¸ä»…è¦èŽ·å–çŸ¥è¯†ï¼Œæ›´è¦é€šè¿‡åå¤å®žè·µæ¥å·©å›ºå’Œä½“ä¼šï¼Œæœ€ç»ˆè¾¾åˆ°å†…å¿ƒçš„æ„‰æ‚¦ã€‚
è¿™å¥è¯å¥ å®šäº†å„’å®¶"å­¦ä»¥è‡´ç”¨"çš„æ•™è‚²ç†å¿µã€‚`,
        translation: `å­”å­è¯´ï¼š"å­¦ä¹ äº†çŸ¥è¯†ç„¶åŽæŒ‰æ—¶æ¸©ä¹ ï¼Œä¸æ˜¯å¾ˆæ„‰å¿«å—ï¼Ÿæœ‰å¿—åŒé“åˆçš„äººä»Žè¿œæ–¹æ¥ï¼Œä¸æ˜¯å¾ˆå¿«ä¹å—ï¼Ÿäººå®¶ä¸äº†è§£æˆ‘ï¼Œæˆ‘å´ä¸æ¼æ€’ï¼Œä¸ä¹Ÿæ˜¯å›å­å—ï¼Ÿ"`,
        order: 0
      }
    ]).returning();

    console.log(`âœ… Inserted ${articles.length} articles`);

    // 3. æ’å…¥è¯¾ç¨‹æ•°æ®
    console.log('ðŸŽ“ Inserting courses...');

    const courses = await db.insert(course).values([
      {
        id: '00000000-0000-0000-0000-000000002001',
        title: 'ã€Šå¤§å­¦ã€‹å¯¼è¯»',
        description: 'ç³»ç»Ÿå­¦ä¹ ã€Šå¤§å­¦ã€‹çš„å“²å­¦æ€æƒ³ï¼ŒæŽŒæ¡ä¸‰çº²é¢†å…«æ¡ç›®çš„ç²¾é«“',
        coverImage: '/courses/university-intro.jpg',
        status: 'ongoing',
        categoryId: '00000000-0000-0000-0000-000000000011',
        startDate: new Date('2024-03-01'),
        endDate: new Date('2024-06-30')
      },
      {
        id: '00000000-0000-0000-0000-000000002002',
        title: 'ã€Šä¸­åº¸ã€‹ç²¾è®²',
        description: 'æ·±å…¥æŽ¢è®¨ä¸­åº¸ä¹‹é“ï¼Œå­¦ä¹ ä¸åä¸å€šçš„å¤„ä¸–æ™ºæ…§',
        coverImage: '/courses/doctrine-of-mean.jpg',
        status: 'upcoming',
        categoryId: '00000000-0000-0000-0000-000000000012',
        startDate: new Date('2024-07-01'),
        endDate: new Date('2024-09-30')
      },
      {
        id: '00000000-0000-0000-0000-000000002003',
        title: 'ã€Šè®ºè¯­ã€‹ç ”è¯»',
        description: 'é€ç« ç ”è¯»ã€Šè®ºè¯­ã€‹ï¼Œé¢†ä¼šå­”å­çš„æ•™è‚²æ€æƒ³å’Œäººç”Ÿæ™ºæ…§',
        coverImage: '/courses/analects-study.jpg',
        status: 'ongoing',
        categoryId: '00000000-0000-0000-0000-000000000021',
        startDate: new Date('2024-02-15'),
        endDate: new Date('2024-05-31')
      },
      {
        id: '00000000-0000-0000-0000-000000002004',
        title: 'ã€Šå­Ÿå­ã€‹æ€æƒ³ç ”ç©¶',
        description: 'æŽ¢è®¨å­Ÿå­çš„æ€§å–„è®ºå’Œä»æ”¿æ€æƒ³',
        coverImage: '/courses/mencius-study.jpg',
        status: 'completed',
        categoryId: '00000000-0000-0000-0000-000000000031',
        startDate: new Date('2023-09-01'),
        endDate: new Date('2023-12-31')
      }
    ]).returning();

    console.log(`âœ… Inserted ${courses.length} courses`);

    // 4. æ’å…¥ç¬”è®°æ•°æ®
    console.log('ðŸ“ Inserting notes...');

    const notes = await db.insert(note).values([
      {
        id: '00000000-0000-0000-0000-000000003001',
        articleId: '00000000-0000-0000-0000-000000001001',
        userId: '37e3c06f-47f3-4c93-a356-cbfeae3e8571', // å‡è®¾çš„ç”¨æˆ·ID
        title: 'å­¦ä¹ å¿ƒå¾—ï¼šå¤§å­¦ä¹‹é“çš„çŽ°å®žæ„ä¹‰',
        content: `åœ¨å­¦ä¹ ã€Šå¤§å­¦ã€‹ç¬¬ä¸€ç« çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘å¯¹"å¤§å­¦ä¹‹é“"æœ‰äº†æ›´æ·±çš„ç†è§£ã€‚

**ä¸»è¦æ”¶èŽ·ï¼š**
1. "æ˜Žæ˜Žå¾·"ä¸ä»…æ˜¯è®¤è¯†è‡ªå·±çš„å…‰æ˜Žæœ¬æ€§ï¼Œæ›´è¦åœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­å®žè·µ
2. "äº²æ°‘"ä½“çŽ°äº†å„’å®¶çš„ç¤¾ä¼šè´£ä»»æ„Ÿå’Œäººæ–‡å…³æ€€
3. "æ­¢äºŽè‡³å–„"ä¸ºäººç”Ÿæä¾›äº†æ˜Žç¡®çš„ä»·å€¼å¯¼å‘

**å®žè·µä½“ä¼šï¼š**
åœ¨å·¥ä½œä¸­ï¼Œæˆ‘å°è¯•å°†"çŸ¥æ­¢è€ŒåŽæœ‰å®š"åº”ç”¨äºŽé¡¹ç›®ç®¡ç†ï¼Œæ˜Žç¡®ç›®æ ‡åŽç¡®å®žèƒ½å¤Ÿæ›´åŠ ä¸“æ³¨å’Œåšå®šã€‚

**åæ€ï¼š**
çŽ°ä»£ç¤¾ä¼šä¸­ï¼Œæˆ‘ä»¬å¾€å¾€å¿½è§†äº†è¿™ç§å¾ªåºæ¸è¿›çš„å­¦ä¹ å’Œä¿®å…»è¿‡ç¨‹ï¼Œå€¼å¾—æ·±æ€ã€‚`
      },
      {
        id: '00000000-0000-0000-0000-000000003002',
        articleId: '00000000-0000-0000-0000-000000001001',
        userId: '37e3c06f-47f3-4c93-a356-cbfeae3e8571', // å‡è®¾çš„ç”¨æˆ·ID
        title: 'å…³äºŽ"çŸ¥æ­¢"çš„æ€è€ƒ',
        content: `"çŸ¥æ­¢è€ŒåŽæœ‰å®š"è¿™å¥è¯ç»™äº†æˆ‘å¾ˆå¤§å¯å‘ã€‚

åœ¨ä¿¡æ¯çˆ†ç‚¸çš„æ—¶ä»£ï¼Œæˆ‘ä»¬å¾€å¾€è´ªå¤šæ±‚å…¨ï¼Œåè€Œå¤±åŽ»äº†æ–¹å‘ã€‚"çŸ¥æ­¢"æ•™ä¼šæˆ‘ä»¬è¦æ‡‚å¾—å–èˆï¼Œæ˜Žç¡®è‡ªå·±çš„ç•Œé™å’Œç›®æ ‡ã€‚

ä¸ªäººæ„Ÿæ‚Ÿï¼š
- åœ¨çŸ¥è¯†å­¦ä¹ ä¸Šè¦æœ‰æ‰€é€‰æ‹©
- åœ¨äººç”Ÿè§„åˆ’ä¸Šè¦æœ‰æ‰€ä¸“æ³¨
- åœ¨äººé™…å…³ç³»ä¸Šè¦æœ‰æ‰€ç•Œé™

è¿™ä¹Ÿè®¸å°±æ˜¯å¤äººæ™ºæ…§çš„çŽ°ä»£ä»·å€¼ã€‚`
      },
      {
        id: '00000000-0000-0000-0000-000000003003',
        articleId: '00000000-0000-0000-0000-000000001003',
        userId: '37e3c06f-47f3-4c93-a356-cbfeae3e8571',
        title: 'å­¦è€Œæ—¶ä¹ ä¹‹çš„å®žè·µæ–¹æ³•',
        content: `å­”å­è¯´"å­¦è€Œæ—¶ä¹ ä¹‹ï¼Œä¸äº¦è¯´ä¹Ž"ï¼Œè¿™å¥è¯çœ‹ä¼¼ç®€å•ï¼Œå®žåˆ™æ·±åˆ»ã€‚

**æˆ‘çš„ç†è§£ï¼š**
- "å­¦"æ˜¯çŸ¥è¯†çš„èŽ·å–
- "æ—¶"æ˜¯æ°å½“çš„æ—¶æœº
- "ä¹ "æ˜¯å®žè·µå’Œåº”ç”¨
- "è¯´"æ˜¯å†…å¿ƒçš„æ„‰æ‚¦

**å®žè·µæ–¹æ³•ï¼š**
1. å­¦ä¹ åŽç«‹å³å¤ä¹ å·©å›º
2. å°†çŸ¥è¯†åº”ç”¨äºŽå®žé™…é—®é¢˜
3. å®šæœŸåæ€å’Œæ€»ç»“
4. ä¸ŽåŒå¥½äº¤æµè®¨è®º

é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå­¦ä¹ ç¡®å®žæˆäº†ä¸€ä»¶å¿«ä¹çš„äº‹æƒ…ã€‚`
      }
    ]).returning();

    console.log(`âœ… Inserted ${notes.length} notes`);

    // 5. æ’å…¥ç›®å½•é¡¹æ•°æ®
    console.log('ðŸ“‘ Inserting table of contents...');

    const tocItems = await db.insert(tocItem).values([
      // ã€Šå¤§å­¦ä¹‹é“ã€‹æ–‡ç« çš„ç›®å½•
      {
        entityType: 'article',
        entityId: '00000000-0000-0000-0000-000000001001',
        title: 'å¤§å­¦ä¹‹é“',
        anchorId: 'title',
        level: 1,
        order: 0
      },
      {
        entityType: 'article',
        entityId: '00000000-0000-0000-0000-000000001001',
        title: 'åŽŸæ–‡',
        anchorId: 'original',
        level: 2,
        order: 1
      },
      {
        entityType: 'article',
        entityId: '00000000-0000-0000-0000-000000001001',
        title: 'åŽ†å²èƒŒæ™¯',
        anchorId: 'historical',
        level: 2,
        order: 2
      },
      {
        entityType: 'article',
        entityId: '00000000-0000-0000-0000-000000001001',
        title: 'è¯‘æ–‡',
        anchorId: 'translation',
        level: 2,
        order: 3
      },
      {
        entityType: 'article',
        entityId: '00000000-0000-0000-0000-000000001001',
        title: 'å­¦ç”Ÿå¿ƒå¾—',
        anchorId: 'notes',
        level: 2,
        order: 4
      },

      // ã€Šæ˜Žæ˜Žå¾·ã€‹æ–‡ç« çš„ç›®å½•
      {
        entityType: 'article',
        entityId: '00000000-0000-0000-0000-000000001002',
        title: 'æ˜Žæ˜Žå¾·',
        anchorId: 'title',
        level: 1,
        order: 0
      },
      {
        entityType: 'article',
        entityId: '00000000-0000-0000-0000-000000001002',
        title: 'å…«æ¡ç›®',
        anchorId: 'eight-steps',
        level: 2,
        order: 1
      },
      {
        entityType: 'article',
        entityId: '00000000-0000-0000-0000-000000001002',
        title: 'ä¿®èº«ä¹‹é“',
        anchorId: 'self-cultivation',
        level: 2,
        order: 2
      },

      // ç¬”è®°çš„ç›®å½•
      {
        entityType: 'note',
        entityId: '00000000-0000-0000-0000-000000003001',
        title: 'å­¦ä¹ å¿ƒå¾—ï¼šå¤§å­¦ä¹‹é“çš„çŽ°å®žæ„ä¹‰',
        anchorId: 'title',
        level: 1,
        order: 0
      },
      {
        entityType: 'note',
        entityId: '00000000-0000-0000-0000-000000003001',
        title: 'ä¸»è¦æ”¶èŽ·',
        anchorId: 'main-gains',
        level: 2,
        order: 1
      },
      {
        entityType: 'note',
        entityId: '00000000-0000-0000-0000-000000003001',
        title: 'å®žè·µä½“ä¼š',
        anchorId: 'practice',
        level: 2,
        order: 2
      }
    ]).returning();

    console.log(`âœ… Inserted ${tocItems.length} table of content items`);

    // 6. è¾“å‡ºç»Ÿè®¡ä¿¡æ¯
    console.log('\nðŸ“Š Seeding Summary:');
    console.log(`   ðŸ“š Categories: ${categories.length}`);
    console.log(`   ðŸ“– Articles: ${articles.length}`);
    console.log(`   ðŸŽ“ Courses: ${courses.length}`);
    console.log(`   ðŸ“ Notes: ${notes.length}`);
    console.log(`   ðŸ“‘ TOC Items: ${tocItems.length}`);

    console.log('\nðŸŽ‰ Database seeding completed successfully!');
    console.log('\nðŸ’¡ Next steps:');
    console.log('   - Run your application to see the seeded data');
    console.log('   - Check the database to verify all relationships are correct');
    console.log('   - Consider adding more specific data for your use case');

  } catch (error) {
    console.error('âŒ Database seeding failed:');
    console.error(error);
    throw error;
  }
}

// å¦‚æžœç›´æŽ¥è¿è¡Œæ­¤æ–‡ä»¶ï¼Œåˆ™æ‰§è¡Œç§å­æ•°æ®
if (require.main === module) {
  seedDatabase()
    .then(() => {
      process.exit(0);
    })
    .catch((error) => {
      console.error('Seeding failed:', error);
      process.exit(1);
    });
}